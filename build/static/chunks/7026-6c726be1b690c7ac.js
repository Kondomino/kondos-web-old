(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7026],{57026:function(e,t,n){"use strict";n.d(t,{Z:function(){return listing_image_gallery_ListingImageGallery},L:function(){return getNewParam}});var r=n(26705);n(42015);var a=n(16691),l=n.n(a),s=n(24033),o=n(20955),i=n(67251);function invariant(e,t){if(!e)throw Error("Invariant failed")}var c=new Map([["Win","Meta"],["Scroll","ScrollLock"],["Spacebar"," "],["Down","ArrowDown"],["Left","ArrowLeft"],["Right","ArrowRight"],["Up","ArrowUp"],["Del","Delete"],["Crsel","CrSel"],["Exsel","ExSel"],["Apps","ContextMenu"],["Esc","Escape"],["Decimal","."],["Multiply","*"],["Add","+"],["Subtract","-"],["Divide","/"]]),shimKeyboardEvent=function(e){if(c.has(e.key)){var t=c.get(e.key);Object.defineProperty(e,"key",{configurable:!0,enumerable:!0,get:function(){return t}})}},useKeypress=function(e,t){Array.isArray(e)||"string"==typeof e||invariant(!1),Array.isArray(e)&&e.forEach(function(e,t){"string"!=typeof e&&invariant(!1)}),"function"==typeof t||null==t||invariant(!1);var n=(0,o.useRef)();(0,o.useEffect)(function(){n.current=function(n){shimKeyboardEvent(n),(Array.isArray(e)?e.includes(n.key):e===n.key)&&(null==t||t(n))}},[e,t]),(0,o.useEffect)(function(){var eventListener=function(e){n.current(e)};return window.addEventListener("keydown",eventListener),function(){window.removeEventListener("keydown",eventListener)}},[])},d=n(40013),u=n(3217);let h=o.forwardRef(function({title:e,titleId:t,...n},r){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}),m=o.forwardRef(function({title:e,titleId:t,...n},r){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}),f=o.forwardRef(function({title:e,titleId:t,...n},r){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"}))});var x=n(62677),g=n(62167),w=n(8792),v=n(22261),p=n(89467);let range=(e,t)=>{let n=[];void 0===t&&(t=e,e=0);for(let r=e;r<t;r+=1)n.push(r);return n};function Twitter(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-twitter",...e,children:(0,r.jsx)("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"})})}function SharedModal(e){var t;let{index:n,images:a,changePhotoId:s,closeModal:i,navigation:c,currentPhoto:b,direction:j}=e,[k,y]=(0,o.useState)(!1),N=null==a?void 0:a.filter(e=>range(n-15,n+15).includes(e.id)),L=(0,v.QS)({onSwipedLeft:()=>{n<(null==a?void 0:a.length)-1&&s(n+1)},onSwipedRight:()=>{n>0&&s(n-1)},trackMouse:!0}),C=a?a[n]:b,E=(null===(t=document.querySelector("html"))||void 0===t?void 0:t.getAttribute("dir"))==="rtl";return(0,r.jsx)(x.A,{transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},children:(0,r.jsxs)("div",{className:"relative z-50 flex aspect-[3/2] w-full max-w-7xl items-center wide:h-full xl:taller-than-854:h-auto",...L,children:[(0,r.jsx)("div",{className:"w-full overflow-hidden",children:(0,r.jsx)("div",{className:"relative flex aspect-[3/2] items-center justify-center",children:(0,r.jsx)(g.M,{initial:!1,custom:j,children:(0,r.jsx)(w.E.div,{custom:j,variants:(0,p.o)(),initial:"enter",animate:"center",exit:"exit",className:"absolute",children:(0,r.jsx)(l(),{src:(null==C?void 0:C.url)||"",width:c?1280:1920,height:c?853:1280,priority:!0,alt:"Chisfis listing gallery",onLoad:()=>y(!0),sizes:"(max-width: 1025px) 100vw, 1280px",className:"object-contain"})},n)})})}),(0,r.jsxs)("div",{className:"absolute inset-0 mx-auto flex max-w-7xl items-center justify-center",children:[k&&(0,r.jsxs)("div",{className:"relative aspect-[3/2] max-h-full w-full",children:[c&&(0,r.jsxs)(r.Fragment,{children:[n>0&&(0,r.jsx)("button",{className:"absolute start-3 top-[calc(50%-16px)] rounded-full bg-black/50 p-3 text-white/75 backdrop-blur-lg transition hover:bg-black/75 hover:text-white focus:outline-none",style:{transform:"translate3d(0, 0, 0)"},onClick:()=>s(n-1),children:(0,r.jsx)(d.Z,{className:"h-6 w-6 rtl:rotate-180"})}),n+1<a.length&&(0,r.jsx)("button",{className:"absolute end-3 top-[calc(50%-16px)] rounded-full bg-black/50 p-3 text-white/75 backdrop-blur-lg transition hover:bg-black/75 hover:text-white focus:outline-none",style:{transform:"translate3d(0, 0, 0)"},onClick:()=>s(n+1),children:(0,r.jsx)(u.Z,{className:"h-6 w-6 rtl:rotate-180"})})]}),(0,r.jsx)("div",{className:"absolute top-0 end-0 flex items-center gap-2 p-3 text-white",children:c?(0,r.jsx)("a",{href:"#",className:"rounded-full bg-black/50 p-2 text-white/75 backdrop-blur-lg transition hover:bg-black/75 hover:text-white",target:"_blank",title:"Open fullsize version",rel:"noreferrer",children:(0,r.jsx)(h,{className:"h-5 w-5"})}):(0,r.jsx)("a",{href:"https://twitter.com/intent/tweet?text=Check%20out%20this%20pic%20from%20Chisfis%20!%0A%0A".concat(location.href),className:"rounded-full bg-black/50 p-2 text-white/75 backdrop-blur-lg transition hover:bg-black/75 hover:text-white",target:"_blank",title:"Open fullsize version",rel:"noreferrer",children:(0,r.jsx)(Twitter,{className:"h-5 w-5"})})}),(0,r.jsx)("div",{className:"absolute top-0 start-0 flex items-center gap-2 p-3 text-white",children:(0,r.jsx)("button",{onClick:()=>i(),className:"rounded-full bg-black/50 p-2 text-white/75 backdrop-blur-lg transition hover:bg-black/75 hover:text-white",children:c?(0,r.jsx)(m,{className:"h-5 w-5"}):(0,r.jsx)(f,{className:"h-5 w-5"})})})]}),c&&(0,r.jsx)("div",{className:"fixed inset-x-0 bottom-0 z-40 overflow-hidden bg-gradient-to-b from-black/0 to-black/60",children:(0,r.jsx)(w.E.div,{initial:!1,className:"mx-auto mt-6 mb-6 flex aspect-[3/2] h-14",children:(0,r.jsx)(g.M,{initial:!1,children:N.map(e=>{let{id:t,url:o}=e;return(0,r.jsx)(w.E.button,{initial:{width:"0%",x:"".concat((n-1)*(E?100:-100),"%")},animate:{scale:t===n?1.25:1,width:"100%",x:"".concat(n*(E?100:-100),"%")},exit:{width:"0%"},onClick:()=>s(t),className:"".concat(t===n?"z-20 rounded-md shadow shadow-black/50":"z-10"," ").concat(0===t?"rounded-s-md":""," ").concat(t===a.length-1?"rounded-e-md":""," relative inline-block w-full shrink-0 transform-gpu overflow-hidden focus:outline-none"),children:(0,r.jsx)(l(),{alt:"small photos on the bottom",width:180,height:120,className:"".concat(t===n?"brightness-110 hover:brightness-110":"brightness-50 contrast-125 hover:brightness-75"," h-full transform object-cover transition"),src:o||""})},t)})})})})]})]})})}function Modal(e){let{images:t,onClose:n}=e,a=(0,o.useRef)(null),l=(0,s.useSearchParams)(),c=(0,s.useRouter)(),d=(0,s.usePathname)(),u=null==l?void 0:l.get("photoId"),h=Number(u),[m,f]=(0,o.useState)(0),[x,g]=(0,o.useState)(h);function handleClose(){n&&n()}function changePhotoId(e){e>h?f(1):f(-1),g(e),c.push("".concat(d,"/?").concat(getNewParam({value:e})))}return useKeypress("ArrowRight",()=>{h+1<t.length&&changePhotoId(h+1)}),useKeypress("ArrowLeft",()=>{h>0&&changePhotoId(h-1)}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Vq,{static:!0,open:!0,onClose:handleClose,initialFocus:a,className:"fixed inset-0 z-50 flex items-center justify-center ",children:(0,r.jsx)(SharedModal,{index:x,direction:m,images:t,changePhotoId:changePhotoId,closeModal:handleClose,navigation:!0})})})}var b=n(35656);let{useGlobalState:j}=(0,b.r)({photoToScrollTo:null}),useLastViewedPhoto=()=>j("photoToScrollTo"),k=o.forwardRef(function({title:e,titleId:t,...n},r){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"}))});var y=n(75786),components_LikeSaveBtns=()=>{let[e,t]=(0,o.useState)(!1);return(0,r.jsx)("div",{className:"flow-root",children:(0,r.jsxs)("div",{className:"flex text-neutral-700 dark:text-neutral-300 text-sm -mx-3 -my-1.5",children:[(0,r.jsxs)("span",{className:"py-1.5 px-3 flex rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,r.jsx)("span",{className:"hidden sm:block ms-2",children:"Share"})]}),(0,r.jsxs)("span",{className:"py-1.5 px-3 flex rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 cursor-pointer ",onClick:()=>t(!e),children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ".concat(e?"text-red-500":""),fill:e?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,r.jsx)("span",{className:"hidden sm:block ms-2",children:"Save"})]})]})})};let getNewParam=e=>{let{paramName:t="photoId",value:n}=e,r=new URLSearchParams(document.location.search);return r.set(t,String(n)),r.toString()};var listing_image_gallery_ListingImageGallery=e=>{let{images:t,onClose:n,isShowModal:a}=e,c=(0,s.useSearchParams)(),d=null==c?void 0:c.get("photoId"),u=(0,s.useRouter)(),[h,m]=useLastViewedPhoto(),f=(0,o.useRef)(null),x=(0,s.usePathname)();(0,o.useEffect)(()=>{if(h&&!d){var e;null===(e=f.current)||void 0===e||e.scrollIntoView({block:"center"}),m(null)}},[d,h,m]);let handleClose=()=>{n&&n()};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(y.u,{appear:!0,show:a,as:o.Fragment,children:(0,r.jsxs)(i.Vq,{as:"div",className:"relative z-40",onClose:handleClose,children:[(0,r.jsx)(y.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-white"})}),(0,r.jsxs)("div",{className:"fixed inset-0 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky z-10 top-0 p-4 xl:px-10 flex items-center justify-between bg-white",children:[(0,r.jsx)("button",{className:"focus:outline-none focus:ring-0 w-10 h-10 rounded-full flex items-center justify-center hover:bg-neutral-100",onClick:handleClose,children:(0,r.jsx)(k,{className:"w-6 h-6"})}),(0,r.jsx)(components_LikeSaveBtns,{})]}),(0,r.jsx)("div",{className:"flex min-h-full items-center justify-center sm:p-4 pt-0 text-center",children:(0,r.jsx)(y.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-5",enterTo:"opacity-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-5",children:(0,r.jsx)(i.Vq.Panel,{className:"w-full max-w-screen-lg mx-auto transform p-4 pt-0 text-left transition-all ",children:(0,r.jsxs)("div",{className:" ",children:[d&&(0,r.jsx)(Modal,{images:t,onClose:()=>{m(d);let e=new URLSearchParams(document.location.search);e.delete("photoId"),u.push("".concat(x,"/?").concat(e.toString()))}}),(0,r.jsx)("div",{className:"columns-1 gap-4 sm:columns-2 xl:columns-3",children:t.map(e=>{let{id:t,url:n}=e;return(0,r.jsx)("div",{onClick:()=>{let e=getNewParam({value:t});u.push("".concat(x,"/?").concat(e))},ref:t===Number(h)?f:null,className:"after:content group relative mb-5 block w-full cursor-zoom-in after:pointer-events-none after:absolute after:inset-0 after:rounded-lg after:shadow-highlight focus:outline-none",children:(0,r.jsx)(l(),{alt:"chisfis listing gallery ",className:"transform rounded-lg brightness-90 transition will-change-auto group-hover:brightness-110 focus:outline-none",style:{transform:"translate3d(0, 0, 0)"},src:n,width:720,height:480,sizes:"(max-width: 640px) 100vw, (max-width: 1280px) 50vw, 350px"})},t)})})]})})})})]})]})})})}},42015:function(){}}]);